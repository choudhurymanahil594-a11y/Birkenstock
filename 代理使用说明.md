# 代理功能使用说明

## 功能概述
- 每个异步任务自动分配不同的代理
- 代理轮询使用，确保负载均衡
- 自动从 `proxy/working_proxies.json` 文件加载代理列表

## 文件结构
```
├── 第三步_ js获取所有产品颜色的URL.py  # 主脚本
├── proxy_manager.py                    # 代理管理器模块
├── proxy/
│   └── working_proxies.json           # 代理配置文件
└── requirements.txt                    # 依赖包列表
```

## 代理配置格式
`proxy/working_proxies.json` 文件应包含以下格式的代理信息：
```json
{
  "working_proxies": [
    {
      "ip": "代理IP地址",
      "port": 代理端口,
      "username": "用户名",
      "password": "密码",
      "url": "socks5://用户名:密码@IP:端口"
    }
  ]
}
```

## 使用方法
1. 确保 `proxy/working_proxies.json` 文件存在且包含有效的代理
2. 安装依赖：`pip install -r requirements.txt`
3. 运行主脚本：`python "第三步_ js获取所有产品颜色的URL.py"`

## 代理分配逻辑
- 任务ID为0的任务使用索引0的代理
- 任务ID为1的任务使用索引1的代理
- 以此类推，超出代理数量时自动循环使用

## 日志输出
脚本会输出每个任务使用的代理信息：
```
任务 0 使用代理: 46.202.59.143:5634
任务 1 使用代理: 23.229.126.88:7617
任务 2 使用代理: 46.202.59.33:5524
...
```

## 注意事项
- 代理文件路径默认为 `proxy/working_proxies.json`
- 如果代理不可用，会在HTTP请求时自动失败并记录错误
- 每个任务使用独立的代理会话，互不影响
